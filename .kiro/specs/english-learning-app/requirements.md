# 要件定義書

## はじめに

本システムは、英語のニュース記事やブログサイトから学習コンテンツを自動生成する英語学習支援アプリケーションである。ユーザーが提供したURLから記事を取得し、日本語要約、高校レベル以上の英単語の日本語訳、理解度確認用のQ&Aを生成して表示する。生成されたコンテンツはUUID付きのURLで共有可能であり、すべての機能は認証されたユーザーのみが利用できる。

## 用語集

- **システム**: 英語学習支援アプリケーション
- **ユーザー**: 認証されたアプリケーション利用者
- **学習コンテンツ**: 日本語要約、英単語訳、Q&Aを含む生成された教材
- **コンテンツページ**: 学習コンテンツを表示する画面
- **UUID**: コンテンツページを一意に識別する識別子
- **高校レベル以上の英単語**: CEFR B1レベル以上、または英検2級以上相当の語彙
- **GitHub認証**: GitHubアカウントを使用したOAuth認証方式

## 要件

### 要件1

**ユーザーストーリー:** ユーザーとして、英語記事のURLを入力して学習コンテンツを生成したい。そうすることで、記事の内容を効率的に学習できる。

#### 受け入れ基準

1. WHEN ユーザーが有効なURLを入力して送信する THEN システムは入力されたURLから記事コンテンツを取得すること
2. WHEN システムが記事コンテンツを取得する THEN システムは記事の日本語要約を生成すること
3. WHEN システムが記事コンテンツを取得する THEN システムは高校レベル以上の英単語を抽出し日本語訳を生成すること
4. WHEN システムが記事コンテンツを取得する THEN システムは記事内容に基づく理解度確認用のQ&Aを生成すること
5. WHEN すべてのコンテンツ生成が完了する THEN システムは一意のUUIDを持つコンテンツページを作成すること

### 要件2

**ユーザーストーリー:** ユーザーとして、生成された学習コンテンツを一つの画面で閲覧したい。そうすることで、スムーズに学習を進められる。

#### 受け入れ基準

1. WHEN コンテンツページが表示される THEN システムは日本語要約、英単語訳、Q&Aを単一の画面に表示すること
2. WHEN コンテンツページが表示される THEN システムは元の記事URLへのリンクを提供すること
3. WHEN コンテンツページが表示される THEN システムは読みやすいレイアウトでコンテンツを整理して表示すること
4. WHEN ユーザーがコンテンツページにアクセスする THEN システムは2秒以内にページを表示すること

### 要件3

**ユーザーストーリー:** ユーザーとして、生成されたコンテンツをURLで共有したい。そうすることで、他の学習者と教材を共有できる。

#### 受け入れ基準

1. WHEN コンテンツページが生成される THEN システムはUUIDベースの一意なURLを割り当てること
2. WHEN ユーザーがコンテンツページのURLにアクセスする THEN システムは対応する学習コンテンツを表示すること
3. WHEN 存在しないUUIDのURLにアクセスする THEN システムはエラーメッセージを表示すること
4. WHEN コンテンツページのURLが共有される THEN システムは認証済みユーザーのみがコンテンツを閲覧できるようにすること

### 要件4

**ユーザーストーリー:** ユーザーとして、アプリケーションにログインしたい。そうすることで、自分の学習コンテンツを安全に管理できる。

#### 受け入れ基準

1. WHEN 未認証ユーザーがアプリケーションにアクセスする THEN システムはログイン画面にリダイレクトすること
2. WHEN ユーザーがGitHub認証を選択する THEN システムはGitHub OAuthフローを開始すること
3. WHEN GitHubからの認証が成功する THEN システムはユーザーを認証しアプリケーションへのアクセスを許可すること
4. WHEN GitHubからの認証が失敗する THEN システムは認証を拒否しエラーメッセージを表示すること
5. WHEN 認証済みユーザーがログアウトする THEN システムはセッションを終了しログイン画面にリダイレクトすること
6. WHEN 認証済みユーザーのセッションが有効である THEN システムは再ログインを要求せずにアクセスを許可すること

### 要件5

**ユーザーストーリー:** ユーザーとして、無効なURLや取得できない記事に対して適切なエラーメッセージを受け取りたい。そうすることで、問題を理解し対処できる。

#### 受け入れ基準

1. WHEN ユーザーが無効な形式のURLを入力する THEN システムは入力を拒否し明確なエラーメッセージを表示すること
2. WHEN システムが記事コンテンツの取得に失敗する THEN システムはエラーメッセージを表示し失敗理由を説明すること
3. WHEN ネットワークエラーが発生する THEN システムはユーザーに再試行を促すメッセージを表示すること
4. WHEN コンテンツ生成中にエラーが発生する THEN システムは部分的に生成されたコンテンツを保存せず適切なエラーを返すこと

### 要件6

**ユーザーストーリー:** ユーザーとして、生成された英単語訳が高校レベル以上の単語のみを含むことを確認したい。そうすることで、自分のレベルに適した語彙学習ができる。

#### 受け入れ基準

1. WHEN システムが記事から英単語を抽出する THEN システムは高校レベル以上（CEFR B1以上相当）の単語のみを選択すること
2. WHEN 抽出された英単語が表示される THEN システムは各単語に対して正確な日本語訳を提供すること
3. WHEN 記事に高校レベル以上の単語が含まれない THEN システムはその旨をユーザーに通知すること
4. WHEN 英単語が表示される THEN システムは単語を元の記事での出現順または難易度順に整理して表示すること

### 要件7

**ユーザーストーリー:** ユーザーとして、生成されたQ&Aで理解度を確認したい。そうすることで、記事の内容を正しく理解できたか検証できる。

#### 受け入れ基準

1. WHEN システムがQ&Aを生成する THEN システムは記事の主要なポイントをカバーする質問を3〜5個作成すること
2. WHEN Q&Aが表示される THEN システムは各質問に対する正解と解説を提供すること
3. WHEN ユーザーが質問に回答する THEN システムは回答の正誤を判定しフィードバックを提供すること
4. WHEN Q&Aが生成される THEN システムは記事の内容に基づいた事実確認型の質問を含めること
